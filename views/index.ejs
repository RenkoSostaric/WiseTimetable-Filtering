<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WiseTT extractor</title>
    <link rel="stylesheet" href="styles/style.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script>
        $(document).ready(function() {
            function displayLoading() {
                $('section#loading').css('display', 'flex');
                $('div.throbber-container').css('display', 'flex');
                $('div.throbber').css('display', 'block');
                $('div.throbber').css('display', 'block');
                $('p').css('display', 'block');
                $('span.dot').css('display', 'inline-block');
            }

            function hideLoading() {
                $('section#loading').css('display', 'none');
                $('div.throbber-container').css('display', 'none');
                $('div.throbber').css('display', 'none');
                $('div.throbber').css('display', 'none');
                $('p').css('display', 'none');
                $('span.dot').css('display', 'none');
            }

            $('#process').click(function() {
                displayLoading();
                const url = $('#timeTableURL').val();
                $.get(`/get-data?url=${encodeURIComponent(url)}`, function(data) {
                    hideLoading();
                    $('.form-container').append(data);
                    $('#timeTableURL').val(url);
                });
            });
        });
    </script>
</head>

<body>
    <div class="form-container">
        <section id="title">
            <h1>WISE-TT CUSTOM FILTERS</h1>
        </section>
        <section id="link">
            <h2>Urnik link</h2>
            <div class="btn-url-pair">
                <input type="url" name="timetableURL" id="timeTableURL">
                <button id="process">Procesiraj</button>
            </div>
        </section>
        <section id="loading">
            <div class="throbber-container">
                <div class="throbber" id="circle-1"></div>
                <div class="throbber" id="circle-2"></div>
            </div>
            <p>Procesiranje
                <span class="dot" id="dot1">.</span>
                <span class="dot" id="dot2">.</span>
                <span class="dot" id="dot3">.</span>
            </p>
        </section>
    </div>
</body>

</html>